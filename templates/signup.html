<!DOCTYPE html>
<html>

<head>
    <title>Signup Page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" sizes="32x32" href="/static/assets/images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/static/assets/styles/signup.css">
    <link rel="stylesheet" type="text/css" href="/static/assets/styles/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <!--Bootstrap script before body tag 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    make BOOTSTRAP + non-BOOTSTRAP versions -->

</head>

<body>
    <script src="/static/assets/scripts/header.js"></script>
    <div class="container">
        <div class="container-signup">
            <div class="signup-form-box">
                <div class="signup-form">
                    <h2>Sign Up</h2>
                    <form id="signup-form">
                        <label for="first-name">First Name:</label>
                        <input type="text" id="first-name" name="first-name" required>
                        <label for="last-name">Last Name:</label>
                        <input type="text" id="last-name" name="last-name" required>
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                        <div id="email-error"></div>
                        <button type="submit">Sign Up</button>
                    </form>
                    <div id="signup-success-message"></div>
                </div>
            </div>
            <div class="donation-form-box">
                <div class="donation-form">
                    <h2>Donate to our product!</h2>
                    <form id="donation-form">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required>
                        <label for="donation-email">Email:</label>
                        <input type="email" id="donation-email" name="donation-email" required>

                        <div class="amount-buttons">
                            <div class="amount-options">
                                <button type="button" class="amount-btn" data-amount="25">$25</button>
                                <button type="button" class="amount-btn" data-amount="50">$50</button>
                                <button type="button" class="amount-btn" data-amount="100">$100</button>
                                <button type="button" class="amount-btn" id="custom-amount-btn"
                                    data-amount="custom">Custom
                                    Amount</button>
                            </div>
                            <div class="form-group" id="form-group-id">
                                <label for="custom-amount-input">Custom Amount</label>
                                <input type="number" id="custom-amount-input" name="amount" class="form-control" min="1"
                                    step="1" placeholder="Enter custom amount">
                            </div>
                        </div>
                        <label for="payment-method">Payment Method:</label>
                        <select id="payment-method" name="payment-method">
                            <option value="credit-card">Credit Card</option>
                            <option value="paypal">PayPal</option>
                        </select>
                        <!--Changed type attribute of the submit button to button instead of submit. This allows us to handle the form submission with JavaScript instead of letting the browser handle it.-->
                        <button type="button" id="pay-now-button">Pay Now</button>
                    </form>

                        <!-- MOVE BUTTON OUTSIDE OF FORM
                        ********************************
                        ********************************
                        ********************************
                        ********************************

                     -->
                </div>
            </div>
            <button id="loadChart" class="cta-btn" style="width:100%; margin-top: 0.5em;">View
                Statistics</button>
        </div>
    </div>
    </div>

    <!-- INSTANCE 1
            <script>
                $(document).ready(function () {
                    $('#loadChart').click(function () {
                        $('#chartContainer').load('static/assets/chart.html', function () {
                            new Chart(document.getElementById("Signups"), {
                                // Your Chart.js code here
                                fetch('data.csv')
                                     .then(response => response.text())
                                    .then(data => {
                                        // Parse CSV data into arrays for Chart.js
                                        const salesData = [];
                                        const donationsData = [];
                                        const rows = data.split('\n');
                                        rows.forEach(row => {
                                            const values = row.split(',');
                                            salesData.push(parseInt(values[0]));
                                            donationsData.push(parseInt(values[1]));
                                        });

                                        // Create the chart
                                        const ctx = document.getElementById('myChart').getContext('2d');
                                        const myChart = new Chart(ctx, {
                                            type: 'line',
                                            data: {
                                                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                                                datasets: [{
                                                    label: 'Sales',
                                                    data: salesData,
                                                    borderColor: 'blue',
                                                    fill: false
                                                }, {
                                                    label: 'Donations',
                                                    data: donationsData,
                                                    borderColor: 'green',
                                                    fill: false
                                                }]
                                            }
                                        });
                                    });
                            });
                        });
                    });
                });
            </script> -->

    <!-- INSTANCE 2
    
    <script>
        $(document).ready(function () {
            $('#loadChart').click(function () {
                $('#chartContainer').load('static/assets/chart.html', function () {
                    fetch('assets/scripts/data.csv')
                        .then(response => response.text())
                        .then(data => {
                            // Parse CSV data into arrays for Chart.js
                            const salesData = [];
                            const donationsData = [];
                            const rows = data.split('\n');
                            rows.forEach(row => {
                                const values = row.split(',');
                                salesData.push(parseInt(values[0]));
                                donationsData.push(parseInt(values[1]));
                            });

                            // Create the chart
                            const ctx = document.getElementById('myChart').getContext('2d');
                            const myChart = new Chart(ctx, {
                                type: 'line',
                                data: {
                                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                                    datasets: [{
                                        label: 'Sales',
                                        data: salesData,
                                        borderColor: 'blue',
                                        fill: false,
                                        borderColor: Utils.CHART_COLORS.red,
                                        backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5)
                                    }, {
                                        label: 'Donations',
                                        data: donationsData,
                                        borderColor: 'green',
                                        fill: false
                                    }]
                                }
                            });
                        });
                });
            });
        });
    </script>
    -->


    <div id="chartContainer"></div>
    <script>
        /*$(document).ready(function () {
            $('#loadChart').click(function () {
                $('#chartContainer').load('static/assets/chart.html', function () {
                    const salesData = [100, 200, 150, 300, 250, 400, 350, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000, 1050, 1100, 1150, 1200, 1250];
                    const donationsData = [50, 75, 100, 125, 150, 175, 200, 225, 250, 275, 300, 325, 350, 375, 400, 425, 450, 475, 500, 525, 550, 575, 600, 625];

                    const ctx = document.getElementById('myChart').getContext('2d');
                    const myChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                            datasets: [{
                                label: 'Sales',
                                data: salesData,
                                borderColor: 'blue',
                                fill: false
                            }, {
                                label: 'Donations',
                                data: donationsData,
                                borderColor: 'green',
                                fill: false
                            }]
                        }
                    });
                });
            });
        });*/
        // Get the CSV data
        $(document).ready(function () {
            $('#loadChart').click(function () {
                $('#chartContainer').load('static/assets/chart.html', function () {
                    fetch('/get-data')
                        .then(response => response.json())
                        .then(data => {
                            console.log(data)

                            const formattedData = data.map(row => ({
                                date: row[1],
                                id: row[0]
                            }));
                            console.log(formattedData)

                            // Create the chart
                            const ctx = document.getElementById('myChart').getContext('2d');
                            const myChart = new Chart(ctx, {
                                type: 'line',
                                data: {
                                    labels: formattedData.map(row => row.date),
                                    datasets: [{
                                        label: 'Sign Ups',
                                        data: formattedData.map(row => row.id),
                                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                                        borderColor: 'rgba(255, 99, 132, 1)',
                                        borderWidth: 1
                                    }]
                                },
                                options: {
                                    scales: {
                                        y: {
                                            beginAtZero: true
                                        }
                                    }
                                }
                            });
                        });
                });
            });
        });

    </script>

    <script src="/static/assets/scripts/signup_form.js"></script>
    <script src="/static/assets/scripts/footer.js"></script>
    <!--
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
-->
</body>

</html>